<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - classlib/Collections/ArrayedCollection.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome-ie7.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>classlib/Collections/ArrayedCollection.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">118.05</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">946</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">105.01</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">10.60</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">SCScript.install(function(sc) {
  &quot;use strict&quot;;

  require(&quot;./SequenceableCollection&quot;);

  var $ = sc.lang.$;
  var random  = sc.libs.random;
  var mathlib = sc.libs.mathlib;
  var $nil  = $.nil;
  var $int0 = $.int0;
  var $int1 = $.int1;

  sc.lang.klass.refine(&quot;ArrayedCollection&quot;, function(builder, _) {
    builder.addMethod(&quot;valueOf&quot;, function() {
      return this._.map(function(elem) {
        return elem.valueOf();
      });
    });

    builder.addMethod(&quot;__elem__&quot;, function(item) {
      return item || $nil;
    });

    function throwIfImmutable($this) {
      if ($this.__immutable) {
        throw new Error(&quot;Attempted write to immutable object.&quot;);
      }
    }

    builder.addClassMethod(&quot;newClear&quot;, {
      args: &quot;indexedSize=0&quot;
    }, function($indexedSize) {
      var $obj;
      var array, indexedSize, i;

      $obj = this.new();

      indexedSize = $indexedSize.__int__();
      array = new Array(indexedSize);
      for (i = 0; i &lt; indexedSize; ++i) {
        array[i] = $obj.__elem__();
      }
      $obj._ = array;

      return $obj;
    });

    // TODO: implements indexedSize

    builder.addMethod(&quot;size&quot;, function() {
      return $.Integer(this._.length);
    });

    // TODO: implements maxSize

    builder.addMethod(&quot;swap&quot;, {
      args: &quot;a; b&quot;
    }, function($a, $b) {
      var raw = this._;
      var a, b, len, tmp;

      throwIfImmutable(this);

      a = $a.__int__();
      b = $b.__int__();
      len = raw.length;

      if (a &lt; 0 || len &lt;= a || b &lt; 0 || len &lt;= b) {
        throw new Error(&quot;out of index&quot;);
      }

      tmp = raw[b];
      raw[b] = raw[a];
      raw[a] = tmp;

      return this;
    });

    builder.addMethod(&quot;at&quot;, {
      args: &quot;index&quot;
    }, function($index) {
      var i;

      if (Array.isArray($index._)) {
        return $.Array($index._.map(function($index) {
          i = $index.__int__();
          if (i &lt; 0 || this._.length &lt;= i) {
            return $nil;
          }
          return this._[i];
        }, this));
      }

      i = $index.__int__();

      return this._[i] || $nil;
    });

    builder.addMethod(&quot;clipAt&quot;, {
      args: &quot;index&quot;
    }, function($index) {
      var i;

      if (Array.isArray($index._)) {
        return $.Array($index._.map(function($index) {
          i = mathlib.clipIndex($index.__int__(), this._.length);
          return this._[i];
        }, this));
      }

      i = mathlib.clipIndex($index.__int__(), this._.length);

      return this._[i];
    });

    builder.addMethod(&quot;wrapAt&quot;, {
      args: &quot;index&quot;
    }, function($index) {
      var i;

      if (Array.isArray($index._)) {
        return $.Array($index._.map(function($index) {
          var i = mathlib.wrapIndex($index.__int__(), this._.length);
          return this._[i];
        }, this));
      }

      i = mathlib.wrapIndex($index.__int__(), this._.length);

      return this._[i];
    });

    builder.addMethod(&quot;foldAt&quot;, {
      args: &quot;index&quot;
    }, function($index) {
      var i;

      if (Array.isArray($index._)) {
        return $.Array($index._.map(function($index) {
          var i = mathlib.foldIndex($index.__int__(), this._.length);
          return this._[i];
        }, this));
      }

      i = mathlib.foldIndex($index.__int__(), this._.length);

      return this._[i];
    });

    builder.addMethod(&quot;put&quot;, {
      args: &quot;index; item&quot;
    }, function($index, $item) {
      var i;

      throwIfImmutable(this);

      if (Array.isArray($index._)) {
        $index._.forEach(function($index) {
          var i = $index.__int__();
          if (i &lt; 0 || this._.length &lt;= i) {
            throw new Error(&quot;out of index&quot;);
          }
          this._[i] = this.__elem__($item);
        }, this);
      } else {
        i = $index.__int__();
        if (i &lt; 0 || this._.length &lt;= i) {
          throw new Error(&quot;out of index&quot;);
        }
        this._[i] = this.__elem__($item);
      }

      return this;
    });

    builder.addMethod(&quot;clipPut&quot;, {
      args: &quot;index; item&quot;
    }, function($index, $item) {
      throwIfImmutable(this);

      if (Array.isArray($index._)) {
        $index._.forEach(function($index) {
          this._[mathlib.clipIndex($index.__int__(), this._.length)] = this.__elem__($item);
        }, this);
      } else {
        this._[mathlib.clipIndex($index.__int__(), this._.length)] = this.__elem__($item);
      }

      return this;
    });

    builder.addMethod(&quot;wrapPut&quot;, {
      args: &quot;index; item&quot;
    }, function($index, $item) {
      throwIfImmutable(this);

      if (Array.isArray($index._)) {
        $index._.forEach(function($index) {
          this._[mathlib.wrapIndex($index.__int__(), this._.length)] = this.__elem__($item);
        }, this);
      } else {
        this._[mathlib.wrapIndex($index.__int__(), this._.length)] = this.__elem__($item);
      }

      return this;
    });

    builder.addMethod(&quot;foldPut&quot;, {
      args: &quot;index; item&quot;
    }, function($index, $item) {
      throwIfImmutable(this);

      if (Array.isArray($index._)) {
        $index._.forEach(function($index) {
          this._[mathlib.foldIndex($index.__int__(), this._.length)] = this.__elem__($item);
        }, this);
      } else {
        this._[mathlib.foldIndex($index.__int__(), this._.length)] = this.__elem__($item);
      }

      return this;
    });

    builder.addMethod(&quot;removeAt&quot;, {
      args: &quot;index&quot;
    }, function($index) {
      var raw = this._;
      var index;

      throwIfImmutable(this);

      index = $index.__int__();
      if (index &lt; 0 || raw.length &lt;= index) {
        throw new Error(&quot;out of index&quot;);
      }

      return raw.splice(index, 1)[0];
    });

    builder.addMethod(&quot;takeAt&quot;, {
      args: &quot;index&quot;
    }, function($index) {
      var raw = this._;
      var index, ret, instead;

      throwIfImmutable(this);

      index = $index.__int__();
      if (index &lt; 0 || raw.length &lt;= index) {
        throw new Error(&quot;out of index&quot;);
      }

      ret = raw[index];
      instead = raw.pop();
      if (index !== raw.length) {
        raw[index] = instead;
      }

      return ret;
    });

    builder.addMethod(&quot;indexOf&quot;, {
      args: &quot;item&quot;
    }, function($item) {
      var index = this._.indexOf($item);
      return index === -1 ? $nil : $.Integer(index);
    });

    builder.addMethod(&quot;indexOfGreaterThan&quot;, {
      args: &quot;val&quot;
    }, function($val) {
      var raw = this._;
      var val, i, imax = raw.length;

      val = $val.__num__();
      for (i = 0; i &lt; imax; ++i) {
        if (raw[i].__num__() &gt; val) {
          return $.Integer(i);
        }
      }

      return $nil;
    });

    builder.addMethod(&quot;takeThese&quot;, {
      args: &quot;func&quot;
    }, function($func) {
      var raw = this._;
      var i = 0, $i;

      $i = $.Integer(i);
      while (i &lt; raw.length) {
        if ($func.value(raw[i], $i).__bool__()) {
          this.takeAt($i);
        } else {
          $i = $.Integer(++i);
        }
      }

      return this;
    });

    builder.addMethod(&quot;replace&quot;, {
      args: &quot;find; replace&quot;
    }, function($find, $replace) {
      var $index, $out, $array;

      throwIfImmutable(this);

      $out     = $.Array();
      $array   = this;
      $find    = $find.asArray();
      $replace = $replace.asArray();
      $.Func(function() {
        return ($index = $array.find($find)).notNil();
      }).while($.Func(function() {
        $out = $out [&quot;++&quot;] ($array.keep($index)) [&quot;++&quot;] ($replace);
        $array = $array.drop($index [&quot;+&quot;] ($find.size()));
        return $array;
      }));

      return $out [&quot;++&quot;] ($array);
    });

    builder.addMethod(&quot;slotSize&quot;, function() {
      return this.size();
    });

    builder.addMethod(&quot;slotAt&quot;, function($index) {
      return this.at($index);
    });

    builder.addMethod(&quot;slotPut&quot;, function($index, $value) {
      return this.put($index, $value);
    });

    builder.addMethod(&quot;slotKey&quot;, function($index) {
      return $index;
    });

    builder.addMethod(&quot;slotIndex&quot;, function() {
      return $nil;
    });

    builder.addMethod(&quot;getSlots&quot;, function() {
      return this.copy();
    });

    builder.addMethod(&quot;setSlots&quot;, function($array) {
      return this.overWrite($array);
    });

    builder.addMethod(&quot;atModify&quot;, {
      args: &quot;index; function&quot;
    }, function($index, $function) {
      this.put($index, $function.value(this.at($index), $index));
      return this;
    });

    builder.addMethod(&quot;atInc&quot;, {
      args: &quot;index; inc=1&quot;
    }, function($index, $inc) {
      this.put($index, this.at($index).$(&quot;+&quot;, [ $inc ]));
      return this;
    });

    builder.addMethod(&quot;atDec&quot;, {
      args: &quot;index; dec=1&quot;
    }, function($index, $dec) {
      this.put($index, this.at($index).$(&quot;-&quot;, [ $dec ]));
      return this;
    });

    builder.addMethod(&quot;isArray&quot;, sc.TRUE);
    builder.addMethod(&quot;asArray&quot;);

    builder.addMethod(&quot;copyRange&quot;, {
      args: &quot;start; end&quot;
    }, function($start, $end) {
      var start, end, instance, raw;

      if ($start === $nil) {
        start = 0;
      } else {
        start = $start.__int__();
      }
      if ($end === $nil) {
        end = this._.length;
      } else {
        end = $end.__int__();
      }
      raw = this._.slice(start, end + 1);

      instance = new this.__Spec([]);
      instance._ = raw;
      return instance;
    });

    builder.addMethod(&quot;copySeries&quot;, {
      args: &quot;first; second; last&quot;
    }, function($first, $second, $last) {
      var i, first, second, last, step, instance, raw;

      raw = [];
      if ($first === $nil) {
        first = 0;
      } else {
        first = $first.__int__();
      }
      if ($second === $nil) {
        second = first + 1;
      } else {
        second = $second.__int__();
      }
      if ($last === $nil) {
        last = Infinity;
      } else {
        last = $last.__int__();
      }
      last = Math.max(0, Math.min(last, this._.length - 1));
      step = second - first;

      if (step &gt; 0) {
        for (i = first; i &lt;= last; i += step) {
          raw.push(this._[i]);
        }
      } else if (step &lt; 0) {
        for (i = first; i &gt;= last; i += step) {
          raw.push(this._[i]);
        }
      }

      instance = new this.__Spec([]);
      instance._ = raw;
      return instance;
    });

    builder.addMethod(&quot;putSeries&quot;, {
      args: &quot;first; second; last; value&quot;
    }, function($first, $second, $last, $value) {
      var i, first, second, last, step;

      throwIfImmutable(this);

      if ($first === $nil) {
        first = 0;
      } else {
        first = $first.__int__();
      }
      if ($second === $nil) {
        second = first + 1;
      } else {
        second = $second.__int__();
      }
      if ($last === $nil) {
        last = Infinity;
      } else {
        last = $last.__int__();
      }
      last = Math.max(0, Math.min(last, this._.length - 1));
      step = second - first;

      $value = this.__elem__($value);

      if (step &gt; 0) {
        for (i = first; i &lt;= last; i += step) {
          this._[i] = $value;
        }
      } else if (step &lt; 0) {
        for (i = first; i &gt;= last; i += step) {
          this._[i] = $value;
        }
      }

      return this;
    });

    builder.addMethod(&quot;add&quot;, {
      args: &quot;item&quot;
    }, function($item) {
      throwIfImmutable(this);
      this._.push(this.__elem__($item));

      return this;
    });

    builder.addMethod(&quot;addAll&quot;, {
      args: &quot;aCollection&quot;
    }, function($aCollection) {
      var $this = this;

      throwIfImmutable(this);

      if ($aCollection.isCollection().__bool__()) {
        $aCollection.do($.Func(function($item) {
          return $this._.push($this.__elem__($item));
        }));
      } else {
        this.add($aCollection);
      }

      return this;
    });

    builder.addMethod(&quot;putEach&quot;, {
      args: &quot;keys; values&quot;
    }, function($keys, $values) {
      var keys, values, i, imax;

      throwIfImmutable(this);

      $keys   = $keys.asArray();
      $values = $values.asArray();

      keys   = $keys._;
      values = $values._;
      for (i = 0, imax = keys.length; i &lt; imax; ++i) {
        this.put(keys[i], this.__elem__(values[i % values.length]));
      }

      return this;
    });

    builder.addMethod(&quot;extend&quot;, {
      args: &quot;size; item&quot;
    }, function($size, $item) {
      var instance, raw, size, i;

      raw  = this._.slice();
      size = $size.__int__();
      if (raw.length &gt; size) {
        raw.splice(size);
      } else if (raw.length &lt; size) {
        for (i = size - raw.length; i--; ) {
          raw.push(this.__elem__($item));
        }
      }

      instance = new this.__Spec([]);
      instance._ = raw;
      return instance;
    });

    builder.addMethod(&quot;insert&quot;, {
      args: &quot;index; item&quot;
    }, function($index, $item) {
      var index;

      throwIfImmutable(this);

      index = Math.max(0, $index.__int__());
      this._.splice(index, 0, this.__elem__($item));

      return this;
    });

    builder.addMethod(&quot;move&quot;, function($fromIndex, $toIndex) {
      return this.insert($toIndex, this.removeAt($fromIndex));
    });

    builder.addMethod(&quot;addFirst&quot;, {
      args: &quot;item&quot;
    }, function($item) {
      var instance, raw;

      raw = this._.slice();
      raw.unshift(this.__elem__($item));

      instance = new this.__Spec([]);
      instance._ = raw;
      return instance;
    });

    builder.addMethod(&quot;addIfNotNil&quot;, {
      args: &quot;item&quot;
    }, function($item) {
      if ($item === $nil) {
        return this;
      }
      return this.addFirst(this.__elem__($item));
    });

    builder.addMethod(&quot;pop&quot;, function() {
      if (this._.length === 0) {
        return $nil;
      }
      throwIfImmutable(this);
      return this._.pop();
    });

    builder.addMethod(&quot;++&quot;, function($anArray) {
      var instance, raw;

      raw = this._.slice();

      instance = new this.__Spec([]);
      instance._ = raw;
      if ($anArray !== $nil) {
        instance.addAll($anArray);
      }
      return instance;
    });

    // TODO: implements overWrite
    // TODO: implements grow
    // TODO: implements growClear

    builder.addMethod(&quot;seriesFill&quot;, {
      args: &quot;start; step&quot;
    }, function($start, $step) {
      var i, imax;

      for (i = 0, imax = this._.length; i &lt; imax; ++i) {
        this.put($.Integer(i), $start);
        $start = $start.$(&quot;+&quot;, [ $step ]);
      }

      return this;
    });

    builder.addMethod(&quot;fill&quot;, {
      args: &quot;value&quot;
    }, function($value) {
      var raw, i, imax;

      throwIfImmutable(this);

      $value = this.__elem__($value);

      raw = this._;
      for (i = 0, imax = raw.length; i &lt; imax; ++i) {
        raw[i] = $value;
      }

      return this;
    });

    builder.addMethod(&quot;do&quot;, function($function) {
      sc.lang.iterator.execute(
        sc.lang.iterator.array$do(this),
        $function
      );
      return this;
    });

    builder.addMethod(&quot;reverseDo&quot;, function($function) {
      sc.lang.iterator.execute(
        sc.lang.iterator.array$reverseDo(this),
        $function
      );
      return this;
    });

    builder.addMethod(&quot;reverse&quot;, function() {
      var $res = this.copy();
      $res._.reverse();
      return $res;
    });

    builder.addMethod(&quot;windex&quot;, function() {
      var raw = this._;
      var x, r, i, imax;

      // &lt;-- _ArrayWindex --&gt;
      x = 0;
      r = random.next();
      for (i = 0, imax = raw.length; i &lt; imax; ++i) {
        x += raw[i].__num__();
        if (x &gt;= r) {
          return $.Integer(i);
        }
      }

      return $int0;
    });

    builder.addMethod(&quot;normalizeSum&quot;, function() {
      return this [&quot;*&quot;] (this.sum().reciprocal());
    });

    builder.addMethod(&quot;normalize&quot;, {
      args: &quot;min=0.0; max=1.0&quot;
    }, function($min, $max) {
      var $minItem, $maxItem;

      $minItem = this.minItem();
      $maxItem = this.maxItem();
      return this.collect($.Func(function($el) {
        return $el.$(&quot;linlin&quot;, [ $minItem, $maxItem, $min, $max ]);
      }));
    });

    // TODO: implements asciiPlot
    // TODO: implements perfectShuffle
    // TODO: implements performInPlace

    builder.addMethod(&quot;clipExtend&quot;, {
      args: &quot;length&quot;
    }, function($length) {
      var last = this._[this._.length - 1] || $nil;
      return this.extend($length, last);
    });

    builder.addMethod(&quot;rank&quot;, function() {
      return $int1 [&quot;+&quot;] (this.first().rank());
    });

    builder.addMethod(&quot;shape&quot;, function() {
      return $.Array([ this.size() ]) [&quot;++&quot;] (this.at($int0).$(&quot;shape&quot;));
    });

    builder.addMethod(&quot;reshape&quot;, function() {
      var $result;
      var shape, size, i, imax;

      shape = _.toArray(arguments);

      size = 1;
      for (i = 0, imax = shape.length; i &lt; imax; ++i) {
        size *= shape[i].__int__();
      }

      $result = this.flat().wrapExtend($.Integer(size));
      for (i = imax - 1; i &gt;= 1; --i) {
        $result = $result.clump(shape[i]);
      }

      return $result;
    });

    builder.addMethod(&quot;reshapeLike&quot;, {
      args: &quot;another; indexing=\\wrapAt&quot;
    }, function($another, $indexing) {
      var $index, $flat;

      $index = $int0;
      $flat  = this.flat();

      return $another.deepCollect($.Integer(0x7FFFFFFF), $.Func(function() {
        var $item = $flat.perform($indexing, $index);
        $index = $index.__inc__();
        return $item;
      }));
    });

    // TODO: implements deepCollect
    // TODO: implements deepDo

    builder.addMethod(&quot;unbubble&quot;, {
      args: &quot;depth=0; levels=1&quot;
    }, function($depth, $levels) {
      if ($depth.__num__() &lt;= 0) {
        if (this.size().__int__() &gt; 1) {
          return this;
        }
        if ($levels.__int__() &lt;= 1) {
          return this.at($int0);
        }
        return this.at($int0).unbubble($depth, $levels.__dec__());
      }

      return this.collect($.Func(function($item) {
        return $item.unbubble($depth.__dec__());
      }));
    });

    builder.addMethod(&quot;bubble&quot;, {
      args: &quot;depth=0; levels=1&quot;
    }, function($depth, $levels) {
      if ($depth.__int__() &lt;= 0) {
        if ($levels.__int__() &lt;= 1) {
          return $.Array([ this ]);
        }
        return $.Array([ this.bubble($depth, $levels.__dec__()) ]);
      }

      return this.collect($.Func(function($item) {
        return $item.bubble($depth.__dec__(), $levels);
      }));
    });

    builder.addMethod(&quot;slice&quot;, {
      args: &quot;*cuts&quot;
    }, function($$cuts) {
      var $firstCut, $list;
      var lenOfCuts, cuts;

      lenOfCuts = $$cuts.size().__int__();
      if (lenOfCuts === 0) {
        return this.copy();
      }

      $firstCut = $$cuts.at($int0);
      if ($firstCut === $nil) {
        $list = this.copy();
      } else {
        $list = this.at($firstCut.asArray());
      }

      if (lenOfCuts === 1) {
        return $list.unbubble();
      }

      cuts = $$cuts._.slice(1);
      return $list.collect($.Func(function($item) {
        return $item.$(&quot;slice&quot;, cuts);
      })).unbubble();
    });

    builder.addClassMethod(&quot;iota&quot;, function() {
      var $a;
      var args, product, i, imax, a;

      args = arguments;

      product = 1;
      for (i = 0, imax = args.length; i &lt; imax; ++i) {
        product *= args[i].__int__();
      }

      a = new Array(product);
      for (i = 0; i &lt; product; ++i) {
        a[i] = $.Integer(i);
      }

      $a = $.Array(a);
      return $a.reshape.apply($a, args);
    });

    // TODO: implements asRandomTable
    // TODO: implements tableRand
    // TODO: implements msgSize
    // TODO: implements bundleSize
    // TODO: implements clumpBundles

    builder.addMethod(&quot;includes&quot;, function($item) {
      return $.Boolean(this._.indexOf($item) !== -1);
    });

    builder.addMethod(&quot;asString&quot;, function() {
      return $.String(&quot;[ &quot; + this._.map(function($elem) {
        return $elem.asString().__str__();
      }).join(&quot;, &quot;) + &quot; ]&quot;);
    });

    /* istanbul ignore next */
    builder.addMethod(&quot;__sort__&quot;, function($function) {
      throwIfImmutable(this);
      this._.sort(function($a, $b) {
        return $function.value($a, $b).__bool__() ? -1 : 1;
      });
    });
  });

  sc.lang.klass.refine(&quot;RawArray&quot;, function(builder) {
    var SCArray = $(&quot;Array&quot;);

    builder.addMethod(&quot;archiveAsCompileString&quot;, sc.TRUE);
    builder.addMethod(&quot;archiveAsObject&quot;, sc.TRUE);

    builder.addMethod(&quot;rate&quot;, function() {
      return $.Symbol(&quot;scalar&quot;);
    });

    // TODO: implements readFromStream

    builder.addMethod(&quot;powerset&quot;, function() {
      return this.as(SCArray).powerset();
    });
  });

  sc.lang.klass.define(&quot;Int8Array : RawArray&quot;, function(builder) {
    var int8 = new Int8Array(1);

    builder.addMethod(&quot;valueOf&quot;, function() {
      return new Int8Array(this._.map(function($elem) {
        return $elem.__int__();
      }));
    });

    builder.addMethod(&quot;__elem__&quot;, function(item) {
      int8[0] = item ? item.__int__() : 0;
      return $.Integer(int8[0]);
    });
  });

  sc.lang.klass.define(&quot;Int16Array : RawArray&quot;, function(builder) {
    var int16 = new Int16Array(1);

    builder.addMethod(&quot;valueOf&quot;, function() {
      return new Int16Array(this._.map(function($elem) {
        return $elem.__int__();
      }));
    });

    builder.addMethod(&quot;__elem__&quot;, function(item) {
      int16[0] = item ? item.__int__() : 0;
      return $.Integer(int16[0]);
    });
  });

  sc.lang.klass.define(&quot;Int32Array : RawArray&quot;, function(builder) {
    var int32 = new Int32Array(1);

    builder.addMethod(&quot;valueOf&quot;, function() {
      return new Int32Array(this._.map(function($elem) {
        return $elem.__int__();
      }));
    });

    builder.addMethod(&quot;__elem__&quot;, function(item) {
      int32[0] = item ? item.__int__() : 0;
      return $.Integer(int32[0]);
    });
  });

  sc.lang.klass.define(&quot;FloatArray : RawArray&quot;, function(builder) {
    var float32 = new Float32Array(1);

    builder.addMethod(&quot;valueOf&quot;, function() {
      return new Float32Array(this._.map(function($elem) {
        return $elem.__num__();
      }));
    });

    builder.addMethod(&quot;__elem__&quot;, function(item) {
      float32[0] = item ? item.__num__() : 0;
      return $.Float(float32[0]);
    });
  });

  sc.lang.klass.define(&quot;DoubleArray : RawArray&quot;, function(builder) {
    var float64 = new Float64Array(1);

    builder.addMethod(&quot;valueOf&quot;, function() {
      return new Float64Array(this._.map(function($elem) {
        return $elem.__num__();
      }));
    });

    builder.addMethod(&quot;__elem__&quot;, function(item) {
      float64[0] = item ? item.__num__() : 0;
      return $.Float(float64[0]);
    });
  });
});</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
